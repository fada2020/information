<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.info.ais.asm.mapper.HistoryMapper">

	<select id="selectHistory" resultType="jp.co.info.ais.asm.domain.History">
		SELECT
			ast.asset_number,
			ast.maker_name,
			ast.model_name,
			rt.status_code,
			rt.rental_no,
			rt.purpose,
			rt.storage_location,
			rt.applicant_id,
			rt.rental_user_id,
			rt.bp_name,
			rt.rental_day rentalDayS,
			rt.return_day returnDayS
		FROM asset ast, rental rt
		WHERE
		rt.asset_seq = ast.asset_seq
		<if test="assetNumber != null and !assetNumber.equals('')">
		AND ast.asset_number LIKE #{assetNumber}
		</if>
		<if test="applicant != null and !applicant.equals('')">
		AND rt.applicant_id LIKE #{applicant}
		</if>
		<if test="statusCode != 000">
		AND rt.status_code = #{statusCode}
		</if>
		<if test="rentalDayS != null and rentalDayE !=null">
		AND rt.rental_day BETWEEN #{rentalDayS} AND #{rentalDayE}
		</if>
		<if test="returnDayS != null and returnDayE !=null">
		AND rt.return_day BETWEEN #{returnDayS} AND #{returnDayE}
		</if>
		ORDER BY ast.asset_number
	</select>

    <select id="selectStateCode" resultType="jp.co.info.ais.asm.domain.CodeDetail">
    	SELECT
    		code_detail_id,
    		code_detail_name
    	FROM code_detail
		WHERE code_master_id = '002'
    </select>
</mapper>
