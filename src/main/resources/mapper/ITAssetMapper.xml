<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.info.ais.asm.mapper.ITAssetMapper">
    <select id="select" resultType="jp.co.info.ais.asm.domain.ITAsset">
    SELECT A.* FROM(
        SELECT
			ASSETNUMBER
			,P_S_NUM
			,PURCHASEDATE
			,WARRANTYPERIOD
			,BUYTO
			,PURCHASEPRICE
			,STORAGELOCATION
			,S_NUMBER
			,MAKER
			,MODEL
			,SERIALNUM
			,INTERFACECOL
			,OS_NAME
			,OS_PRODUCTKEY
			,CPU_PROCESSOR
			,OPERATING_FREQUENCY
			,MEMORY
			,MEMORY_UPGARDE
			,HDD
			,HDD_UPGARDE
			,MAC_LAN
			,MAC_WIRELESS
			,OTHER
			,SECURITY_BIOS
			,SECURITY_HDD
			,ADMINACCOUNT_ID
			,ADMINACCOUNT_PW
		FROM ITASSET
		ORDER BY ASSETNUMBER ASC
	) A
	WHERE 1 = 1
		<if test="assetNumber != null and !assetNumber.equals('')">
		AND ASSETNUMBER like '%${assetNumber}%'
		</if>
		<if test="psNum != -1">
		AND P_S_NUM = #{psNum}
		</if>
		<if test="sNumber != -1">
		AND S_NUMBER = #{sNumber}
		</if>
		<if test="maker != null and !maker.equals('')">
		AND MAKER like '%${maker}%'
		</if>
		<if test="model != null and !model.equals('')">
		AND MODEL like '%${model}%'
		</if>
		<if test="startPurchaseDate != null and endPurchaseDate != null">
		AND PURCHASEDATE BETWEEN #{startPurchaseDate} and #{endPurchaseDate}
		</if>
	LIMIT #{length} OFFSET #{start}
    </select>

    <select id="selectCount" resultType="int">
    SELECT COUNT(1)
    FROM ITASSET
	WHERE 1 = 1
		<if test="assetNumber != null and !assetNumber.equals('')">
		AND ASSETNUMBER like '%${assetNumber}%'
		</if>
		<if test="psNum != -1">
		AND P_S_NUM = #{psNum}
		</if>
		<if test="sNumber != -1">
		AND S_NUMBER = #{sNumber}
		</if>
		<if test="maker != null and !maker.equals('')">
		AND MAKER like '%${maker}%'
		</if>
		<if test="model != null and !model.equals('')">
		AND MODEL like '%${model}%'
		</if>
		<if test="startPurchaseDate != null and endPurchaseDate != null">
		AND PURCHASEDATE BETWEEN #{startPurchaseDate} and #{endPurchaseDate}
		</if>
    </select>

    <select id="selectStateCode" resultType="jp.co.info.ais.asm.domain.StateCode">
    	SELECT
    		S_NUMBER,
    		STATE
    	FROM STATE
    </select>

    <select id="selectProductCode" resultType="jp.co.info.ais.asm.domain.ProductCode">
    	SELECT
    		P_S_NUM,
    		P_NAME,
    		P_CODE
    	FROM PRODUCT
    </select>

</mapper>
