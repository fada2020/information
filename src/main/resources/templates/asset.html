<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>IT資産管理</title>

    <!-- favicons -->
	<link rel="icon" href="../images/aisRogo.png">
    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
	<link href="../vendors/iCheck/skins/flat/green.css" rel="stylesheet">

    <!-- bootstrap-daterangepicker -->
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
    <!-- bootstrap-datetimepicker -->
    <link href="../vendors/bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">

    <style>
    	#table1 thead, th {text-align: center;}
		#table1 tbody tr{
		    cursor:pointer;
		}
		.my-custom-scrollbar {
			position: relative;
			height: 130px;
			overflow: auto;
		}
		.table-wrapper-scroll-y {
			display: block;
		}
	</style>

  </head>
  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
      	<!-- sidebar -->
		<div th:insert="/fragments/sidebar :: sidebar" th:remove="tag"></div>
        <!-- sidebar -->

        <!-- top navigation -->
        <div th:insert="/fragments/top_nav :: top_nav" th:remove="tag"></div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3>IT資産管理</h3>
              </div>
            </div>

            <div class="clearfix"></div>

            <div class="row">
              <div class="col">
              	<div class="col-md-12"><br></div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">管理番号</span>
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" placeholder="管理番号" id="assetNumber_search">
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">区分</span>
                </div>
                <div class="col-md-2">
                	<select class="form-control" id="psNum_search">
                		<option value="000">区分</option>
                		<option th:each="code : ${productCode}" th:value="${code.codeDetailId}"
                		th:inline="text">[[${code.codeDetailName}]]</option>
					</select>
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">状態</span>
                </div>
                <div class="col-md-2">
                	<select class="form-control" id="sNumber_search">
						<option value="000">状態</option>
                		<option th:each="code : ${stateCode}" th:value="${code.codeDetailId}"
                		th:inline="text">[[${code.codeDetailName}]]</option>
					</select>
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">Maker</span>
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" placeholder="Maker" id="maker_search">
                </div>

                <div class="col-md-12"><br></div>

                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">Model</span>
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" placeholder="Model" id="model_search">
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">購入日</span>
                </div>
                <div class="col-md-2">
					<fieldset>
						<div class="control-group ">
							<div class="controls">
								<div class="input-prepend input-group">
									<span class="add-on input-group-addon"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
									<input type="text" style="width: 200px" name="reservation" id="reservation" class="form-control">
								</div>
							</div>
						</div>
					</fieldset>
                </div>
                <div class="col-md-6">
                    <button type="button" class="btn btn-success pull-right" id="insertBtn">登録</button>
                </div>
                <div class="x_panel">
                  <div class="x_content">

					<div class="table-responsive">
                    <table class="table table-bordered table-hover table-lg text-center" id="table1">
                      <thead class="thead-light">
                        <tr>
                          <th class="col-md-2">管理番号</th>
                          <th class="col-md-1">区分</th>
                          <th class="col-md-2">Model</th>
                          <th class="col-md-1">Maker</th>
                          <th class="col-md-2">購入日</th>
                          <th class="col-md-1">保管位置</th>
                          <th class="col-md-1">状態</th>
                          <th class="col-md-2"></th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
					</div>

					<!-- 照会 modal -->
					<div class="modal" id="modal3d" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
					  <div class="modal-dialog modal-xl" style="width:70%;" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					          <span aria-hidden="true">×</span>
					        </button>
					        <h3 class="modal-title">資産情報照会</h3>
					      </div>
					      <div class="modal-body">
					      	<div class="container-fluid">
							  	<div class="row">
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-3">
						  						<span>管理番号</span>
						  					</div>
						  					<div class="col-md-3">
								  				<span id="assetNumber_view"></span>
								  			</div>
								  			<div class="col-md-3">
								  				<span>区分</span>
								  			</div>
								  			<div class="col-md-3">
								  				<span id="psNum_view"></span>
								  			</div>
						  				</div>
						  			</div>
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-3">
							  					<span>購入日</span>
							  				</div>
							  				<div class="col-md-3">
							  					<span id="purchaseDate_view"></span>
							  				</div>
							  				<div class="col-md-3">
							  					<span>保証期間</span>
							  				</div>
							  				<div class="col-md-3">
							  					<span id="warrantyPeriod_view"></span>
							  				</div>
						  				</div>
						  			</div>

						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-3">
						  						<span>購入先</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="buyTo_view"></span>
						  					</div>
						  					<div class="col-md-3">
						  						<span>購入金額</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="purchasePrice_view"></span>
						  					</div>
						  				</div>
						  			</div>
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-3">
						  						<span>保管位置</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="storageLocation_view"></span>
						  					</div>
						  					<div class="col-md-3">
						  						<span>状態</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="sNumber_view"></span>
						  					</div>
						  				</div>
						  			</div>

						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-3">
						  						<span>Maker</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="maker_view"></span>
						  					</div>
						  					<div class="col-md-3">
						  						<span>Model</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="model_view"></span>
						  					</div>
						  				</div>
						  			</div>
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-3">
						  						<span>S/N</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="serialNum_view"></span>
						  					</div>
						  					<div class="col-md-3">
						  						<span>I/F</span>
						  					</div>
						  					<div class="col-md-3">
						  						<span id="interFaceCol_view"></span>
						  					</div>
						  				</div>
						  			</div>

						  			<div class="col-md-12">
						  				<span>OS</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>名(Edition)</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="OSName_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>Product Key</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="OSProductKey_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>CPU</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>Processor</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="CPUProcessor_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>動作周波数</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="operatingFrequency_view"></span>
						  			</div>

						  			<div class="col-md-6">
						  				<span>Memory</span>
						  			</div>
						  			<div class="col-md-6">
						  				<span>HDD</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span id="memory_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>Upgarde</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span id="memoryUpgarde_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span id="HDD_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>Upgarde</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span id="HDDUpgarde_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>MAC</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>LAN</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="MACLAN_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>Wireless</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="MACWireless_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>その他</span>
						  			</div>
						  			<div class="col-md-12">
						  				<span id="other_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>Security</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>BIOS</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="securityBIOS_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>HDD</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="securityHDD_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>Admin.Account</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>ID</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="adminAccountID_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>PW</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span id="adminAccountPW_view"></span>
						  			</div>

							  		<div class="col-md-12">
							  			<h5>付属品</h5>
					  					<div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar">
											<table class="table table-striped jambo_table bulk_action text-center" id="accTable">
												<thead>
													<tr class="headings">
														<th class="col-md-1">No </th>
														<th class="col-md-3">品名 </th>
														<th class="col-md-2">仕樣 </th>
														<th class="col-md-1">数量 </th>
														<th class="col-md-5">備考 </th>
													</tr>
												</thead>
												<tbody>
												</tbody>
											</table>
										</div>
							  		</div>

							  		<div class="col-md-12">
							  			<h5>保守履歴</h5>
					  					<div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar">
											<table class="table table-striped jambo_table bulk_action text-center" id="maintenTable">
												<thead>
													<tr class="headings">
														<th class="col-md-2">実施日 </th>
														<th class="col-md-6">実施内容 </th>
														<th class="col-md-2">担当 </th>
														<th class="col-md-2">承認 </th>
													</tr>
												</thead>
												<tbody>
												</tbody>
											</table>
										</div>
							  		</div>

							  	</div>
						  	</div>
					      </div>
					      <div class="modal-footer">
					        <button type="button" class="btn btn-secondary" data-dismiss="modal">戻る</button>
					      </div>
					    </div>
					  </div>
					</div>
					<!-- /照会 modal -->

					<!-- 登録 modal -->
					<div class="modal" id="insertModal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
					  <div class="modal-dialog modal-xl" style="width:70%;" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					          <span aria-hidden="true">×</span>
					        </button>
					        <h3 class="modal-title">資産情報登録</h3>
					      </div>
					      <div class="modal-body">
					      	<div class="container-fluid">
							  	<div class="row">
					            <form action="/asset/insert" method="POST" role="form" class="form-horizontal">
					            	<div class="row">
							  			<div class="col-md-6">
							  				<div class="row">
									  			<div class="col-md-3">
									  				<span>区分</span>
									  			</div>
									  			<div class="col-md-3">
								                	<select name="kubunCode" class="form-control" id="psNum_search">
								                		<option th:each="code : ${productCode}" th:value="${code.codeDetailId}"
								                		th:inline="text">[[${code.codeDetailName}]]</option>
													</select>
									  			</div>
							  					<div class="col-md-3">
								  					<span>購入日</span>
								  				</div>
								  				<div class="col-md-3">
												<div class="input-group date" id="myDatepicker">
													<input type="text" class="form-control" name="purchaseDate">
													<span class="input-group-addon">
													<span class="glyphicon glyphicon-calendar"></span>
												 </span>
												</div>
								  				</div>
							  				</div>
							  			</div>
							  			<div class="col-md-6">
							  				<div class="row">
								  				<div class="col-md-3">
								  					<span>保証期間</span>
								  				</div>
								  				<div class="col-md-3">
								  					<input type="text" class="form-control" name="warrantyPeriod" value="0">
								  				</div>
							  					<div class="col-md-3">
							  						<span>購入先</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="buyTo">
							  					</div>
							  				</div>
							  			</div>
									</div>
									<div class="row">
							  			<div class="col-md-6">
							  				<div class="row">
							  					<div class="col-md-3">
							  						<span>購入金額</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="purchasePrice" value="0">
							  					</div>
							  					<div class="col-md-3">
							  						<span>保管位置</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="storageLocation">
							  					</div>
							  				</div>
							  			</div>
							  			<div class="col-md-6">
							  				<div class="row">
							  					<div class="col-md-3">
							  						<span>状態</span>
							  					</div>
							  					<div class="col-md-3">
								                	<select name="statusCode" class="form-control" id="sNumber_search">
								                		<option th:each="code : ${stateCode}" th:value="${code.codeDetailId}"
								                		th:inline="text">[[${code.codeDetailName}]]</option>
													</select>
							  					</div>
							  					<div class="col-md-3">
							  						<span>Maker</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="makerName">
							  					</div>
							  				</div>
							  			</div>
									</div>
									<div class="row">
							  			<div class="col-md-6">
							  				<div class="row">
							  					<div class="col-md-3">
							  						<span>Model</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="modelName">
							  					</div>
							  					<div class="col-md-3">
							  						<span>S/N</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="serialNum">
							  					</div>
							  				</div>
							  			</div>
							  			<div class="col-md-6">
							  				<div class="row">
							  					<div class="col-md-3">
							  						<span>I/F</span>
							  					</div>
							  					<div class="col-md-3">
							  						<input type="text" class="form-control" name="interFaceCol">
							  					</div>
							  					<div class="col-md-6">
							  					</div>
							  				</div>
							  			</div>
									</div>
						  			<div class="col-md-12">
						  				<span>OS</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>名(Edition)</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="osName">
						  			</div>
						  			<div class="col-md-3">
						  				<span>Product Key</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="osProductKey">
						  			</div>

						  			<div class="col-md-12">
						  				<span>CPU</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>Processor</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="cpuProcessor">
						  			</div>
						  			<div class="col-md-3">
						  				<span>動作周波数</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="operatingFrequency" value="0">
						  			</div>

						  			<div class="col-md-6">
						  				<span>Memory</span>
						  			</div>
						  			<div class="col-md-6">
						  				<span>HDD</span>
						  			</div>
						  			<div class="col-md-2">
						  				<input type="text" class="form-control" name="memory" value="0">
						  			</div>
						  			<div class="col-md-2">
						  				<span>Upgarde</span>
						  			</div>
						  			<div class="col-md-2">
						  				<input type="text" class="form-control" name="memoryUpgarde" value="0">
						  			</div>
						  			<div class="col-md-2">
						  				<input type="text" class="form-control" name="hdd" value="0">
						  			</div>
						  			<div class="col-md-2">
						  				<span>Upgarde</span>
						  			</div>
						  			<div class="col-md-2">
						  				<input type="text" class="form-control" name="hddUpgarde" value="0">
						  			</div>

						  			<div class="col-md-12">
						  				<span>MAC</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>LAN</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="macLan">
						  			</div>
						  			<div class="col-md-3">
						  				<span>Wireless</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="macWireless">
						  			</div>

						  			<div class="col-md-12">
						  				<span>その他</span>
						  			</div>
						  			<div class="col-md-12">
						  				<input type="text" class="form-control" name="other">
						  			</div>

						  			<div class="col-md-12">
						  				<span>Security</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>BIOS</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="securityBios">
						  			</div>
						  			<div class="col-md-3">
						  				<span>HDD</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="securityHdd">
						  			</div>

						  			<div class="col-md-12">
						  				<span>Admin.Account</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>ID</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="adminAccountId">
						  			</div>
						  			<div class="col-md-3">
						  				<span>PW</span>
						  			</div>
						  			<div class="col-md-3">
						  				<input type="text" class="form-control" name="adminAccountPwd">
						  			</div>
						  			<div class="col-md-12">
						  				<button type="submit" class="btn btn-info pull-right">登録</button>
						  			</div>
						  		</form>

							  	</div>
						  	</div>
					      </div>
					      <div class="modal-footer">
					        <button type="button" class="btn btn-secondary" data-dismiss="modal">戻る</button>
					      </div>
					    </div>
					  </div>
					</div>
					<!-- /登録 modal -->

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <div th:insert="/fragments/footer :: footer" th:remove="tag"></div>
        <!-- /footer content -->
      </div>
    </div>

    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>

	<!-- jquery-ui -->
	<script th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
	<!-- DataTable -->
	<script th:src="@{/DataTables-1.10.20/js/jquery.dataTables.min.js}"></script>
	<script th:src="@{/DataTables-1.10.20/js/dataTables.bootstrap4.min.js}"></script>

    <!-- FastClick -->
    <script src="../vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="../vendors/nprogress/nprogress.js"></script>
    <!-- iCheck -->
    <script src="../vendors/iCheck/icheck.min.js"></script>
    <!-- bootstrap-daterangepicker -->
    <script src="../vendors/moment/min/moment.min.js"></script>
    <script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="../vendors/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <!-- Custom Theme Scripts -->
    <script src="../build/js/custom.min.js"></script>

    <!-- page script -->
    <script th:inline="javascript">
    /*<![CDATA[*/
    	var productCodeMap = new Map();
		var productCode = /*[[${productCode}]]*/;
    	productCode.forEach(function( value ) {
    		productCodeMap.set(value.codeDetailId, value.codeDetailName);
    	});
    	var stateCodeMap = new Map();
    	var stateCode = /*[[${stateCode}]]*/;
    	stateCode.forEach(function( value ) {
    		stateCodeMap.set(value.codeDetailId, value.codeDetailName);
    	});

        $(function(){

            $('#myDatepicker').datetimepicker({
                format: 'YYYY-MM-DD'
            });

			$('#reservation').daterangepicker({
				startDate: moment().add(-120, "months"),
				endDate: moment(),
			 locale: {
			       format: 'YYYY/MM/DD'
			   }, function(start, end, label) {
			       console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
			   }
			});

            // datatableの設定を変更
            var modalesectiontable = $("#table1").DataTable({
            	"language": {
            		"info":           "表示 _START_ ~ _END_ の _TOTAL_ エントリ",
            		"infoEmpty":      "表示 0 ~ 0 の 0 エントリ",
            	    "infoFiltered":   "",
            	    "emptyTable": "表にデータがない",
            	    "paginate": {
            	        "first":      "最初",
            	        "last":       "最後",
            	        "next":       "次へ",
            	        "previous":   "前の"
            	    }
                },
            	"fixedHeader": true,
            	"processing": true,
            	"serverSide": true,
            	"start": 0,
                "pageLength": 10,
                "searching": false,
                "paging": true,
                "lengthChange": false,
                "ordering": false,
                "ajax": {
                	url: /*[[@{/asset/getAssetlist}]]*/ 'asset/getAssetlist',
                	type: "POST",
                	dataType: "json",
                	contentType: 'application/JSON',
                	data: function ( d ) {
                		d.columns[0].search.value = $('#assetNumber_search').val();
                		d.columns[1].search.value = $('#psNum_search').val();
                		d.columns[2].search.value = $('#sNumber_search').val();
                		d.columns[3].search.value = $('#maker_search').val();
                		d.columns[4].search.value = $('#model_search').val();
                		d.columns[5].search.value = $('#reservation').val();
                        return JSON.stringify(d);
                    }
                },
                "columnDefs": [
                    { targets: 0, data: "assetNumber"},
                    { targets: 1, data: function ( d ) {
                    	return productCodeMap.get(d.kubunCode);
                    }},
                    { targets: 2, data: "modelName"},
                    { targets: 3, data: "makerName"},
                    { targets: 4, data: function ( d ) {
                    	var str = d.purchaseDate;
                    	return str.substring(0, 4) + "-" + str.substring(4, 6) + "-" + str.substring(6, 8);
                    }},
                    { targets: 5, data: "storageLocation"},
                    { targets: 6, data: function ( d ) {
                    	return stateCodeMap.get(d.statusCode);
                    }},
                    {
                    	targets: 7,
                    	data: "update",
                        render: function ( data, type, row, meta ) {
                          return '<button type="button" class="btn btn-warning" onclick = "location.href =\'' +
                          '/asset/' + row.assetSeq + '\'">更新</button><button type="button" class="btn btn-danger" onclick = "location.href =\'' +
                          '/asset/' + row.assetSeq + '\'">削除</button>';
                        }
                    }
                ]
            });

            // Search
            $('#assetNumber_search').on( 'keyup', function () {
            	modalesectiontable
                .column(0)
                .search( this.value )
                .draw();
            } );

            $('#psNum_search').change(function() {
            	modalesectiontable
                .column(1)
                .search( this.value )
                .draw();
            });

            $('#sNumber_search').change(function() {
            	modalesectiontable
                .column(2)
                .search( this.value )
                .draw();
            });

            $('#maker_search').on( 'keyup', function () {
            	modalesectiontable
                .column(3)
                .search( this.value )
                .draw();
            });

            $('#model_search').on( 'keyup', function () {
            	modalesectiontable
                .column(4)
                .search( this.value )
                .draw();
            });

            $("#reservation").change(function () {
                var date = $("#reservation").val();
                alert(date);
                modalesectiontable
                .column(5)
                .search(date)
                .draw();
            });

            $('#table1 tbody').on( 'click', 'tr td', function () {
            	var rowData = modalesectiontable.row( this ).data();
            	if(this._DT_CellIndex.column != 7) {
            		$('#accTable > tbody').empty();
            		$('#maintenTable > tbody').empty();

            		$('#modal3d').modal();

                	$.ajax(/*[[@{/asset/assetInfoAjax}]]*/ 'asset/assetInfoAjax',
        					{
        						type: "POST",
        						dataType: "json",
        						contentType: 'application/JSON',
        						data : JSON.stringify(rowData.assetSeq)
        					}
                    	)
        				.done(function(data) {
                    		$('#assetNumber_view').text(data.assetNumber);
                    		$('#psNum_view').text(productCodeMap.get(data.kubunCode));

                    		var str = data.purchaseDate;

                    		$('#purchaseDate_view').text(str.substring(0, 4) + "-" + str.substring(4, 6) + "-" + str.substring(6, 8));
                    		$('#warrantyPeriod_view').text(data.warrantyPeriod + "年");

                    		$('#buyTo_view').text(data.buyTo);
                    		$('#purchasePrice_view').text(data.purchasePrice);
                    		$('#storageLocation_view').text(data.storageLocation);
                    		$('#sNumber_view').text(stateCodeMap.get(data.statusCode));

                    		$('#maker_view').text(data.makerName);
                    		$('#model_view').text(data.modelName);
                    		$('#serialNum_view').text(data.serialNum);
                    		$('#interFaceCol_view').text(data.interFaceCol);

                    		$('#OSName_view').text(data.osName);
                    		$('#OSProductKey_view').text(data.osProductKey);
                    		$('#CPUProcessor_view').text(data.cpuProcessor);
                    		$('#operatingFrequency_view').text(data.operatingFrequency + " GHz");

                    		$('#memory_view').text(data.memory + " GB");
                    		$('#memoryUpgarde_view').text(data.memoryUpgarde + " GB");
                    		$('#HDD_view').text(data.hdd + " GB");
                    		$('#HDDUpgarde_view').text(data.hddUpgarde + " GB");

                    		$('#MACLAN_view').text(data.macLan);
                    		$('#MACWireless_view').text(data.macWireless);

                    		$('#other_view').text(data.other);

                    		$('#securityBIOS_view').text(data.securityBios);
                    		$('#securityHDD_view').text(data.securityHdd);

                    		$('#adminAccountID_view').text(data.adminAccountId);
                    		$('#adminAccountPW_view').text(data.adminAccountPwd);

                    		data.accessoriesList.forEach(function( data ) {
								$('#accTable tbody').append(
									 '<tr>'
									 +'<td>'+data.accessoriesSeq+'</td>'
									 +'<td>'+data.itemName+'</td>'
									 +'<td>'+data.itemSpec+'</td>'
									 +'<td>'+data.itemQuantity+'</td>'
									 +'<td>'+data.remarks+'</td>'
									 +'</tr>'
								);
                        	});

                    		if( data.accessoriesList == '' ){
                    			$('#accTable tbody').append('<tr><td colspan="5">データなし</td></tr>');
                    		}

                    		data.maintenanceHistoryList.forEach(function( data ) {
								$('#maintenTable tbody').append(
									 '<tr>'
									 +'<td>'+data.implementationDate+'</td>'
									 +'<td>'+data.implementationDetail+'</td>'
									 +'<td>'+data.repId+'</td>'
									 +'<td>'+data.approverId+'</td>'
									 +'</tr>'
								);
                        	});

                    		if( data.maintenanceHistoryList == '' ){
                    			$('#maintenTable tbody').append('<tr><td colspan="4">データなし</td></tr>');
                    		}

        				});

            	} else {
            		//alert(JSON.stringify(rowData));
            	}
            } );

            $('#insertBtn').on('click', function () {
            	$('#insertModal').modal();
            });

        })
    /*]]>*/
    </script>

</body>
</html>