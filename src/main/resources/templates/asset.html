<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>IT資産管理</title>

    <!-- favicons -->
	<link rel="icon" href="../images/aisRogo.png">
    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
	<link href="../vendors/iCheck/skins/flat/green.css" rel="stylesheet">

    <!-- bootstrap-daterangepicker -->
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
    <!-- bootstrap-datetimepicker -->
    <link href="../vendors/bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">

    <style>
    	#table1 thead, th {text-align: center; }
		#table1 tbody tr{
		    cursor:pointer;
		}
		#table1 th{
			vertical-align:middle;
		}
		#table1 td{
			vertical-align:middle;
		}
		.my-custom-scrollbar {
			position: relative;
			height: 130px;
			overflow: auto;
		}
		.my-custom-scrollbar-update {
			position: relative;
			height: 250px;
			overflow: auto;
		}
		.table-wrapper-scroll-y {
			display: block;
		}
		.error {
	      color: red;
	      background-color: lavender;
		}
		#am_table1, #am_table2, thead, th {text-align: center;}
	</style>

  </head>
  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
      	<!-- sidebar -->
		<div th:insert="fragments/sidebar :: sidebar" th:remove="tag"></div>
        <!-- sidebar -->

        <!-- top navigation -->
        <div th:insert="fragments/top_nav :: top_nav" th:remove="tag"></div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3><i class="fa fa-laptop"></i> IT資産管理</h3>
              </div>
            </div>

            <div class="clearfix"></div>

            <div class="row">
              <div class="col">
              	<div class="col-md-12"><br></div>
              	<!-- 検索条件 -->
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">管理番号</span>
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" placeholder="管理番号" id="assetNumber_search">
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">区分</span>
                </div>
                <div class="col-md-2">
                	<select class="form-control" id="psNum_search">
                		<option value="00">全体</option>
                		<option th:each="code : ${productCode}" th:value="${code.codeDetailId}"
                		th:inline="text">[[${code.codeDetailName}]]</option>
					</select>
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">状態</span>
                </div>
                <div class="col-md-2">
                	<select class="form-control" id="sNumber_search">
						<option value="00">全体</option>
                		<option th:each="code : ${stateCode}" th:value="${code.codeDetailId}"
                		th:inline="text">[[${code.codeDetailName}]]</option>
					</select>
                </div>
                <div class="col-md-3">
                </div>

                <div class="col-md-12"><br></div>

                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">Maker</span>
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" placeholder="Maker" id="maker_search">
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">Model</span>
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" placeholder="Model" id="model_search">
                </div>
                <div class="col-md-1">
                    <span class="pull-right" style="font-size: 18px;">購入期間</span>
                </div>
                <div class="col-md-2">
					<fieldset>
						<div class="control-group ">
							<div class="controls">
								<div class="input-prepend input-group">
									<span class="add-on input-group-addon"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
									<input type="text" style="width: 200px" name="reservation" id="reservation" class="form-control">
								</div>
							</div>
						</div>
					</fieldset>
                </div>
                <!-- /検索条件 -->

                <div class="col-md-3">
                    <button type="button" class="btn btn-success pull-right" id="insertBtn">
                    	<i class="fa fa-pencil-square" aria-hidden="true"></i> 資産登録
                    </button>
                </div>
                <div class="x_panel">
                  <div class="x_content">

					<!-- 資産情報 dataTable -->
					<div class="table-responsive">
                    <table class="table table-bordered table-hover jambo_table dataTable table-lg text-center" style="width:100%;" id="table1">
                      <thead class="thead-light">
                        <tr>
                          <th class="col-md-2">管理番号</th>
                          <th class="col-md-1">区分</th>
                          <th class="col-md-2">Model</th>
                          <th class="col-md-1">Maker</th>
                          <th class="col-md-2">購入日</th>
                          <th class="col-md-1">保管位置</th>
                          <th class="col-md-1">状態</th>
                          <th class="col-md-2"></th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
					</div>
					<!-- /資産情報 dataTable -->

					<!-- 照会 modal -->
					<div class="modal" id="modal3d" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true" data-backdrop="static">
					  <div class="modal-dialog modal-xl" style="width:70%;" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					          <span aria-hidden="true">×</span>
					        </button>
					        <h3 class="modal-title">資産情報照会</h3>
					      </div>
					      <div class="modal-body">
					      	<div class="container-fluid">
							  	<div class="row">
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-2">
						  						<span>管理番号</span>
						  					</div>
						  					<div class="col-md-4 text-center">
								  				<span id="assetNumber_view"></span>
								  			</div>
								  			<div class="col-md-2">
								  				<span>区分</span>
								  			</div>
								  			<div class="col-md-4 text-center">
								  				<span id="psNum_view"></span>
								  			</div>
						  				</div>
						  			</div>
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-2">
							  					<span>購入日</span>
							  				</div>
							  				<div class="col-md-4 text-center">
							  					<span id="purchaseDate_view"></span>
							  				</div>
						  					<div class="col-md-2">
						  						<span>状態</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="sNumber_view"></span>
						  					</div>
						  				</div>
						  			</div>

						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-2">
						  						<span>購入先</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="buyTo_view"></span>
						  					</div>
						  					<div class="col-md-2">
						  						<span>購入金額</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="purchasePrice_view"></span>
						  					</div>
						  				</div>
						  			</div>
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-2">
						  						<span>保管位置</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="storageLocation_view"></span>
						  					</div>
							  				<div class="col-md-2">
							  					<span>保証期間</span>
							  				</div>
							  				<div class="col-md-4 text-center">
							  					<span id="warrantyPeriod_view"></span>
							  				</div>
						  				</div>
						  			</div>

						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-2">
						  						<span>Maker</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="maker_view"></span>
						  					</div>
						  					<div class="col-md-2">
						  						<span>Model</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="model_view"></span>
						  					</div>
						  				</div>
						  			</div>
						  			<div class="col-md-6">
						  				<div class="row">
						  					<div class="col-md-2">
						  						<span>S/N</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="serialNum_view"></span>
						  					</div>
						  					<div class="col-md-2">
						  						<span>I/F</span>
						  					</div>
						  					<div class="col-md-4 text-center">
						  						<span id="interFaceCol_view"></span>
						  					</div>
						  				</div>
						  			</div>

						  			<div class="col-md-12">
						  				<span>その他</span>
						  			</div>
						  			<div class="col-md-12 text-center">
						  				<textarea class="form-control" id="other_view" name="other" readonly="readonly"></textarea>
						  			</div>

						  			<div class="col-md-12" style="border-top: 1px solid #ddd;margin-top: 10px;">
						  				<span>OS</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>名(Edition)</span>
						  			</div>
						  			<div class="col-md-4 text-center">
						  				<span id="OSName_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>Product Key</span>
						  			</div>
						  			<div class="col-md-4 text-center">
						  				<span id="OSProductKey_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>CPU</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>Processor</span>
						  			</div>
						  			<div class="col-md-4 text-center">
						  				<span id="CPUProcessor_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>動作周波数</span>
						  			</div>
						  			<div class="col-md-4 text-center">
						  				<span id="operatingFrequency_view"></span>
						  			</div>

						  			<div class="col-md-6">
						  				<span>Memory</span>
						  			</div>
						  			<div class="col-md-6">
						  				<span>HDD</span>
						  			</div>
						  			<div class="col-md-2 text-center">
						  				<span id="memory_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>Upgarde</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span id="memoryUpgarde_view"></span>
						  			</div>
						  			<div class="col-md-2 text-center">
						  				<span id="HDD_view"></span>
						  			</div>
						  			<div class="col-md-2">
						  				<span>Upgarde</span>
						  			</div>
						  			<div class="col-md-2">
						  				<span id="HDDUpgarde_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>MAC</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>LAN</span>
						  			</div>
						  			<div class="col-md-3 text-center">
						  				<span id="MACLAN_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>Wireless</span>
						  			</div>
						  			<div class="col-md-3 text-center">
						  				<span id="MACWireless_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>Security</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>BIOS</span>
						  			</div>
						  			<div class="col-md-3 text-center">
						  				<span id="securityBIOS_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>HDD</span>
						  			</div>
						  			<div class="col-md-3 text-center">
						  				<span id="securityHDD_view"></span>
						  			</div>

						  			<div class="col-md-12">
						  				<span>Admin.Account</span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>ID</span>
						  			</div>
						  			<div class="col-md-3 text-center">
						  				<span id="adminAccountID_view"></span>
						  			</div>
						  			<div class="col-md-3">
						  				<span>PW</span>
						  			</div>
						  			<div class="col-md-3 text-center">
						  				<span id="adminAccountPW_view"></span>
						  			</div>
							  		<div class="col-md-12" style="border-top: 1px solid #ddd;margin-top: 10px;">
							  			<h5>付属品</h5>
					  					<div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar">
											<table class="table table-bordered jambo_table bulk_action text-center" id="accTable">
												<thead>
													<tr class="headings">
														<th class="col-md-1">No </th>
														<th class="col-md-3">品名 </th>
														<th class="col-md-2">仕樣 </th>
														<th class="col-md-1">数量 </th>
														<th class="col-md-5">備考 </th>
													</tr>
												</thead>
												<tbody>
												</tbody>
											</table>
										</div>
							  		</div>

							  		<div class="col-md-12">
							  			<h5>保守履歴</h5>
					  					<div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar">
											<table class="table table-bordered jambo_table bulk_action text-center" id="maintenTable">
												<thead>
													<tr class="headings">
														<th class="col-md-2">実施日 </th>
														<th class="col-md-6">実施内容 </th>
														<th class="col-md-2">担当 </th>
														<th class="col-md-2">承認 </th>
													</tr>
												</thead>
												<tbody>
												</tbody>
											</table>
										</div>
							  		</div>

							  	</div>
						  	</div>
					      </div>
					      <div class="modal-footer">
					        <button type="button" class="btn btn-secondary" data-dismiss="modal">戻る</button>
					      </div>
					    </div>
					  </div>
					</div>
					<!-- /照会 modal -->

					<!-- 登録 modal -->
					<div class="modal" id="insertModal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true" data-backdrop="static">
					  <div class="modal-dialog modal-xl" style="width:70%;" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					          <span aria-hidden="true">×</span>
					        </button>
					        <h3 class="modal-title">
					        	<i class="fa fa-pencil-square" aria-hidden="true"></i> 資産情報登録

					        </h3>
					      </div>
					      <form action="/asset/insert" id="insertForm" method="POST" role="form" class="form-horizontal">
					      <div class="modal-body">
					      	<div class="container-fluid">
							  	<div class="row">
							  		<div class="row well">
						            	<div class="row">
								  		<div class="col-md-6">
								  				<div class="row">
										  			<div class="col-md-2">
										  				<span>区分</span>
										  			</div>
										  			<div class="col-md-4">
									                	<select name="kubunCode" class="form-control" id="psNum_search">
									                		<option th:each="code : ${productCode}" th:value="${code.codeDetailId}"
									                		th:inline="text">[[${code.codeDetailName}]]</option>
														</select>
										  			</div>
										  			<div class="form-group">
									  					<div class="col-md-2">
										  					<span>購入日</span>
										  				</div>
										  				<div class="col-md-4">
														<div class="input-group date" id="myDatepicker">
															<input type="text" class="form-control" name="purchaseDate">
															<span class="input-group-addon">
																<span class="glyphicon glyphicon-calendar"></span>
														 	</span>
														</div>
														<div class="messages"></div>
										  				</div>
									  				</div>
								  				</div>
								  			</div>
								  			<div class="col-md-6">
								  				<div class="row">
								  					<div class="col-md-2">
								  						<span>状態</span>
								  					</div>
								  					<div class="col-md-4">
									                	<select name="statusCode" class="form-control" id="sNumber_search">
									                		<option value="01">保管</option>
														</select>
								  					</div>
								  					<div class="col-md-2">
								  						<span>購入先</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control" name="buyTo">
								  					</div>
								  				</div>
								  			</div>
										</div>
										<div class="row">
								  			<div class="col-md-6">
								  				<div class="row">
								  					<div class="col-md-2">
								  						<span>購入金額</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control numVal" name="purchasePrice" value="0">
								  					</div>
								  					<div class="col-md-2">
								  						<span>保管位置</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control" name="storageLocation">
								  					</div>
								  				</div>
								  			</div>
								  			<div class="col-md-6">
								  				<div class="row">
									  				<div class="col-md-2">
									  					<span>保証期間</span>
									  				</div>
									  				<div class="col-md-4">
									  					<input type="text" class="form-control numVal" name="warrantyPeriod" value="0">
									  				</div>
								  					<div class="col-md-2">
								  						<span>Maker</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control" name="makerName">
								  					</div>
								  				</div>
								  			</div>
										</div>
										<div class="row"><br></div>
										<div class="row">
								  			<div class="col-md-6">
								  				<div class="row">
								  					<div class="col-md-2">
								  						<span>Model</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control" name="modelName">
								  					</div>
								  					<div class="col-md-2">
								  						<span>S/N</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control" name="serialNum">
								  					</div>
								  				</div>
								  			</div>
								  			<div class="col-md-6">
								  				<div class="row">
								  					<div class="col-md-2">
								  						<span>I/F</span>
								  					</div>
								  					<div class="col-md-4">
								  						<input type="text" class="form-control" name="interFaceCol">
								  					</div>
								  					<div class="col-md-6">
								  					</div>
								  				</div>
								  			</div>
								  			<div class="col-md-12">
								  				<br>
								  				<span>その他</span>
								  			</div>
								  			<div class="col-md-12">
								  				<textarea class="form-control" name="other"></textarea>
								  			</div>
										</div>
									</div>
									<div class="x_panel">
										<div class="x_title">
											<div class="row">
												<h2> PC仕様詳細入力</h2>
												<ul class="nav navbar-right">
													<li><a class="collapse-link"><i class="fa fa-chevron-down"></i></a>
													</li>
												</ul>
											</div>
										</div>
										<div class="x_content" style="display: none;">
											<div class="row well">
									  			<div class="col-md-12">
									  				<span>OS</span>
									  			</div>
									  			<div class="col-md-2">
									  				<span>名(Edition)</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="osName">
									  			</div>
									  			<div class="col-md-2">
									  				<span>Product Key</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="osProductKey">
									  			</div>
											</div>
											<div class="row well">
									  			<div class="col-md-12">
									  				<span>CPU</span>
									  			</div>
									  			<div class="col-md-2">
									  				<span>Processor</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="cpuProcessor">
									  			</div>
									  			<div class="col-md-2">
									  				<span>動作周波数</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control numVal" name="operatingFrequency" value="0">
									  			</div>
								  			</div>
								  			<div class="row well">
								  				<div class="row">
										  			<div class="col-md-12">
										  				<span>Memory</span>
										  			</div>
										  			<div class="col-md-4">
										  				<input type="text" class="form-control numVal" name="memory" value="0">
										  			</div>
										  			<div class="col-md-4 text-right">
										  				<span>Upgarde</span>
										  			</div>
										  			<div class="col-md-4">
										  				<input type="text" class="form-control numVal" name="memoryUpgarde" value="0">
										  			</div>
								  				</div>
								  			</div>
								  			<div class="row well">
								  				<div class="row">
										  			<div class="col-md-12">
										  				<span>HDD</span>
										  			</div>
										  			<div class="col-md-4">
										  				<input type="text" class="form-control numVal" name="hdd" value="0">
										  			</div>
										  			<div class="col-md-4 text-right">
										  				<span>Upgarde</span>
										  			</div>
										  			<div class="col-md-4">
										  				<input type="text" class="form-control numVal" name="hddUpgarde" value="0">
										  			</div>
								  				</div>
								  			</div>
								  			<div class="row well">
									  			<div class="col-md-12">
									  				<span>MAC</span>
									  			</div>
									  			<div class="col-md-2">
									  				<span>LAN</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="macLan">
									  			</div>
									  			<div class="col-md-2">
									  				<span>Wireless</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="macWireless">
									  			</div>
								  			</div>
								  			<div class="row well">
									  			<div class="col-md-12">
									  				<span>Security</span>
									  			</div>
									  			<div class="col-md-2">
									  				<span>BIOS</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="securityBios">
									  			</div>
									  			<div class="col-md-2">
									  				<span>HDD</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="securityHdd">
									  			</div>
											</div>
											<div class="row well">
									  			<div class="col-md-12">
									  				<span>Admin.Account</span>
									  			</div>
									  			<div class="col-md-2">
									  				<span>ID</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="adminAccountId">
									  			</div>
									  			<div class="col-md-2">
									  				<span>PW</span>
									  			</div>
									  			<div class="col-md-4">
									  				<input type="text" class="form-control" name="adminAccountPwd">
									  			</div>
								  			</div>
							  			</div>
						  			</div>
							  	</div>
						  	</div>
					      </div>
					      <div class="modal-footer">
					      	<div class="row">
						      	<div class="col-md-6">
							        <button type="button" class="btn btn-info pull-left btn-success" id="insertProc">資産登録</button>
						        </div>
						        <div class="col-md-6">
						        	<button type="button" class="btn btn-primary" id="initBtn">初期化</button>
						        	<button type="button" class="btn btn-secondary" data-dismiss="modal">戻る</button>
						        </div>
					        </div>
					      </div>
					      </form>
					    </div>
					  </div>
					</div>
					<!-- /登録 modal -->

					<!-- /資産情報変更 modal -->

					<div class="modal fade" id="assetUpdateModal" >


					</div>

					<!-- /資産情報変更 modal -->

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <div th:insert="fragments/footer :: footer" th:remove="tag"></div>
        <!-- /footer content -->
      </div>
    </div>

    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>

	<!-- jquery-ui -->
	<script th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
	<!-- DataTable -->
	<script th:src="@{/DataTables-1.10.20/js/jquery.dataTables.min.js}"></script>
	<script th:src="@{/DataTables-1.10.20/js/dataTables.bootstrap4.min.js}"></script>

    <!-- FastClick -->
    <script src="../vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="../vendors/nprogress/nprogress.js"></script>
    <!-- iCheck -->
    <script src="../vendors/iCheck/icheck.min.js"></script>
    <!-- bootstrap-daterangepicker -->
    <script src="../vendors/moment/min/moment.min.js"></script>
    <script src="../vendors/moment/locale/ja.js"></script>
    <script src="../vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="../vendors/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

    <!-- jquery-validation-1.19.1 -->
    <script src="../vendors/jquery-validation-1.19.1/dist/jquery.validate.min.js"></script>

    <!-- Custom Theme Scripts -->
    <script src="../build/js/custom.min.js"></script>

    <!-- page script -->
    <script th:inline="javascript">
    /*<![CDATA[*/
   	 function assetUpdateF(assetSeq){

    		var requestAssetSeq = assetSeq;
        	$.ajax(/*[[@{/asset/updateSequence}]]*/ 'asset/updateSequence',
			       	{
						type: "POST",
						dataType: "json",
						contentType: 'application/JSON',
						data : JSON.stringify(requestAssetSeq)
					}
				)
				.done(function(data) {
					$("#assetUpdateModal").load("/asset/up"+requestAssetSeq);
				})
				.error(function(){
					alert("想定外のエラーが発生しました。管理者にお問い合わせください。")
				})
        }
    	// 区分コードMap
    	var productCodeMap = new Map();
		var productCode = /*[[${productCode}]]*/;
    	productCode.forEach(function( value ) {
    		productCodeMap.set(value.codeDetailId, value.codeDetailName);
    	});

    	// 状態コードMap
    	var stateCodeMap = new Map();
    	var stateCode = /*[[${stateCode}]]*/;
    	stateCode.forEach(function( value ) {
    		stateCodeMap.set(value.codeDetailId, value.codeDetailName);
    	});

    	// Jquery validator メッセージセッティング
    	$.validator.messages.number = '有効な数字を入力';
    	$.validator.messages.maxlength = '{0} 文字以下を入力';

    	// オンロード
        $(function(){
			// datetimepickerセッティング
            $('#myDatepicker').datetimepicker({
                format: 'YYYY-MM-DD'
            });
         	// daterangepickerセッティング
			$('#reservation').daterangepicker({
				startDate: moment().add(-1, "months"),
				endDate: moment(),
				locale: {
				   applyLabel: '選択',
			       cancelLabel: 'クリア',
			       format: 'YYYY/MM/DD'
			   }, function(start, end, label) {
			       console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
			   }
			});

			// daterangepicker キャンセルボタンクリック時、インプット内容を削除
			$('#reservation').on('cancel.daterangepicker', function(ev, picker) {
					$('#reservation').val('');
					// 日付検索
				    var date = $("#reservation").val();
				    modalesectiontable
				    .column(5)
				    .search(date)
				    .draw();
			});

			// daterangepicker空っぽセッティング
			$('#reservation').val('');

			// フォーム内容初期化
			function refreshForm(obj) {
			    $(obj)
			        .closest('form')
			        .find('input[type="text"], textarea').val('');

			    $(obj)
			        .closest('form')
			        .find('input[type="checkbox"]').prop('checked', false);
			}

            // datatableの設定を変更
            var modalesectiontable = $("#table1").DataTable({
            	"language": {
            		"info":           "_START_ ~ _END_ の _TOTAL_ 件",
            		"infoEmpty":      "表示 0 ~ 0 の 0 エントリ",
            	    "infoFiltered":   "",
            	    "emptyTable": "表にデータがない",
            	    "paginate": {
            	        "first":      "最初",
            	        "last":       "最後",
            	        "next":       "次",
            	        "previous":   "前"
            	    }
                },
            	"fixedHeader": true,
            	"processing": true,
            	"serverSide": true,
            	"start": 0,
                "pageLength": 10,
                "searching": false,
                "paging": true,
                "lengthChange": false,
                "ordering": false,
                "ajax": {
                	url: /*[[@{/asset/getAssetlist}]]*/ 'asset/getAssetlist',
                	type: "POST",
                	dataType: "json",
                	contentType: 'application/JSON',
                	data: function ( d ) {
                		d.columns[0].search.value = $('#assetNumber_search').val();
                		d.columns[1].search.value = $('#psNum_search').val();
                		d.columns[2].search.value = $('#sNumber_search').val();
                		d.columns[3].search.value = $('#maker_search').val();
                		d.columns[4].search.value = $('#model_search').val();
                		d.columns[5].search.value = $('#reservation').val();
                        return JSON.stringify(d);
                    }
                },
                "columnDefs": [
                    { targets: 0, data: "assetNumber"},
                    { targets: 1, data: function ( d ) {
                    	return productCodeMap.get(d.kubunCode);
                    }},
                    { targets: 2, data: function ( d ) {
                    	if(d.modelName == '') {
                    		return '-';
                    	} else {
                    		return d.modelName;
                    	}
                    }},
                    { targets: 3, data: function ( d ) {
                    	if(d.makerName == '') {
                    		return '-';
                    	} else {
                    		return d.makerName;
                    	}
                    }},
                    { targets: 4, data: function ( d ) {
                    	var str = d.purchaseDate;
                    	return str.substring(0, 4) + "-" + str.substring(4, 6) + "-" + str.substring(6, 8);
                    }},
                    { targets: 5, data: function ( d ) {
                    	if(d.storageLocation == '') {
                    		return '-';
                    	} else {
                    		return d.storageLocation;
                    	}
                    }},
                    { targets: 6, data: function ( d ) {
                    	return stateCodeMap.get(d.statusCode);
                    }},
                    {
                    	targets: 7,
                    	data: null,
                        render: function ( data, type, row, meta ) {
                        var html = '<button class="btn btn-warning" data-toggle="modal" data-target="#assetUpdateModal" onClick="assetUpdateF('+ row.assetSeq +')">変更</button>&nbsp;<button type="button" class="btn btn-danger deleteBtn"' +
                        	' id="' + row.assetSeq;
                        	if(row.statusCode=="02") {
                        		html += '" disabled title="貸与の項目は履歴を削除できません。">削除</button>';
                        	} else {
                        		html += '">削除</button>';
                        	}
                        	return html;
                        }
                    }
                ]
            });

			// 資産管理連番検索
            $('#assetNumber_search').on( 'keyup', function () {
            	$('#assetNumber_search').val(this.value.replace(new RegExp("'", 'g'), ''));
            	modalesectiontable
                .column(0)
                .search( this.value )
                .draw();
            } );

			// 区分検索
            $('#psNum_search').change(function() {
            	modalesectiontable
                .column(1)
                .search( this.value )
                .draw();
            });

			// 状態検索
            $('#sNumber_search').change(function() {
            	modalesectiontable
                .column(2)
                .search( this.value )
                .draw();
            });

			// maker検索
            $('#maker_search').on( 'keyup', function () {
            	$('#maker_search').val(this.value.replace(new RegExp("'", 'g'), ''));
            	modalesectiontable
                .column(3)
                .search( this.value )
                .draw();
            });

			// model検索
            $('#model_search').on( 'keyup', function () {
            	$('#model_search').val(this.value.replace(new RegExp("'", 'g'), ''));
            	modalesectiontable
                .column(4)
                .search( this.value )
                .draw();
            });

			// 日付検索
            $("#reservation").change(function () {
                var date = $("#reservation").val();
                modalesectiontable
                .column(5)
                .search(date)
                .draw();
            });

            function changeNull(value){
            	if(value == null || value == "") {
            		return "-";
            	} else {
            		return value;
            	}
            }

			// tbodyクリック時、詳細情報照会
            $('#table1 tbody').on( 'click', 'tr td', function () {
            	var rowData = modalesectiontable.row( this ).data();
            	if(this._DT_CellIndex.column < 7) {
            		// 付属品、保守履歴リスト初期化
            		$('#accTable > tbody').empty();
            		$('#maintenTable > tbody').empty();

            		$('#modal3d').modal();

                	$.ajax(/*[[@{/asset/assetInfoAjax}]]*/ 'asset/assetInfoAjax',
        					{
        						type: "POST",
        						dataType: "json",
        						contentType: 'application/JSON',
        						data : JSON.stringify(rowData.assetSeq)
        					}
                    	)
        				.done(function(data) {
        					// 詳細情報セッティング
                    		$('#assetNumber_view').text(data.assetNumber);
                    		$('#psNum_view').text(productCodeMap.get(data.kubunCode));

                    		var str = data.purchaseDate;

                    		$('#purchaseDate_view').text(str.substring(0, 4) + "-" + str.substring(4, 6) + "-" + str.substring(6, 8));
                    		$('#warrantyPeriod_view').text(data.warrantyPeriod + "年");

                    		$('#buyTo_view').text(changeNull(data.buyTo));
                    		$('#purchasePrice_view').text(data.purchasePrice);
                    		$('#storageLocation_view').text(changeNull(data.storageLocation));
                    		$('#sNumber_view').text(stateCodeMap.get(data.statusCode));

                    		$('#maker_view').text(changeNull(data.makerName));
                    		$('#model_view').text(changeNull(data.modelName));
                    		$('#serialNum_view').text(changeNull(data.serialNum));
                    		$('#interFaceCol_view').text(changeNull(data.interFaceCol));

                    		$('#OSName_view').text(changeNull(data.osName));
                    		$('#OSProductKey_view').text(changeNull(data.osProductKey));
                    		$('#CPUProcessor_view').text(changeNull(data.cpuProcessor));
                    		$('#operatingFrequency_view').text(data.operatingFrequency + " GHz");

                    		$('#memory_view').text(data.memory + " GB");
                    		$('#memoryUpgarde_view').text(data.memoryUpgarde + " GB");
                    		$('#HDD_view').text(data.hdd + " GB");
                    		$('#HDDUpgarde_view').text(data.hddUpgarde + " GB");

                    		$('#MACLAN_view').text(changeNull(data.macLan));
                    		$('#MACWireless_view').text(changeNull(data.macWireless));

                    		$('#other_view').text(changeNull(data.other));

                    		$('#securityBIOS_view').text(changeNull(data.securityBios));
                    		$('#securityHDD_view').text(changeNull(data.securityHdd));

                    		$('#adminAccountID_view').text(changeNull(data.adminAccountId));
                    		$('#adminAccountPW_view').text(changeNull(data.adminAccountPwd));

                    		// 付属品セッティング
                    		data.accessoriesList.forEach(function( data ) {
								$('#accTable tbody').append(
									 '<tr>'
									 +'<td>'+changeNull(data.accessoriesSeq)+'</td>'
									 +'<td>'+changeNull(data.itemName)+'</td>'
									 +'<td>'+changeNull(data.itemSpec)+'</td>'
									 +'<td>'+changeNull(data.itemQuantity)+'</td>'
									 +'<td>'+changeNull(data.remarks)+'</td>'
									 +'</tr>'
								);
                        	});

                    		// 付属品データがないとき
                    		if( data.accessoriesList == '' ){
                    			$('#accTable tbody').append('<tr><td colspan="5">データなし</td></tr>');
                    		}

                    		// 保守履歴セッティング
                    		data.maintenanceHistoryList.forEach(function( data ) {
								$('#maintenTable tbody').append(
									 '<tr>'
									 +'<td>'+changeNull(data.implementationDate)+'</td>'
									 +'<td>'+changeNull(data.implementationDetail)+'</td>'
									 +'<td>'+changeNull(data.repId)+'</td>'
									 +'<td>'+changeNull(data.approverId)+'</td>'
									 +'</tr>'
								);
                        	});

                    		// 保守履歴データがないとき
                    		if( data.maintenanceHistoryList == '' ){
                    			$('#maintenTable tbody').append('<tr><td colspan="4">データなし</td></tr>');
                    		}

        				});

            	} else {
            		//alert(JSON.stringify(rowData));
            	}
            } );

			// 資産登録モーダル表示
            $('#insertBtn').on('click', function () {
            	$('#insertModal').modal();
            });

			// 資産登録プロセス
            $('#insertProc').on('click', function() {
                var form = $('#insertForm');

				// 有効性検査条件セッティング
                form.validate({
                    rules: {
                    	kubunCode : {
                    		required : true
                    	},
                    	purchaseDate: {
                            required: true
                        },
                        statusCode: {
                        	required: true
                        },
                        warrantyPeriod: {
                        	number: true,
                        	maxlength: 2
                        },
                        buyTo: {
                        	maxlength: 15
                        },
                        storageLocation: {
                        	maxlength: 15
                        },
                        makerName: {
                        	maxlength: 25
                        },
                        modelName: {
                        	maxlength: 25
                        },
                        serialNum: {
                        	maxlength: 100
                        },
                        interFaceCol: {
                        	maxlength: 25
                        },
                        osName: {
                        	maxlength: 50
                        },
                        osProductKey: {
                        	maxlength: 50
                        },
                        cpuProcessor: {
                        	maxlength: 50
                        },
                        purchasePrice: {
                        	number: true,
                        	maxlength: 11
                        },
                        operatingFrequency: {
                        	number: true,
                        	maxlength: 7
                        },
                        memory: {
                        	number: true,
                        	maxlength: 7
                        },
                        memoryUpgarde: {
                        	number: true,
                        	maxlength: 7
                        },
                        hdd: {
                        	number: true,
                        	maxlength: 7
                        },
                        hddUpgarde: {
                        	number: true,
                        	maxlength: 7
                        },
                        macLan: {
                        	maxlength: 25
                        },
                        macWireless: {
                        	maxlength: 25
                        },
                        other: {
                        	maxlength: 100
                        },
                        securityBios: {
                        	maxlength: 25
                        },
                        securityHdd: {
                        	maxlength: 25
                        },
                        adminAccountId: {
                        	maxlength: 25
                        },
                        adminAccountPwd: {
                        	maxlength: 25
                        }
                    },
                    messages: {
                    	kubunCode : {
                    		required : "区分を選択"
                    	},
                    	purchaseDate: {
                            required: "日付を入力"
                        },
                        statusCode: {
                        	required: "状態を選択"
                        }
                    },
                    errorPlacement: function(error, element) {
                        if (element.attr("name") == "purchaseDate") {
                          error.insertAfter("#myDatepicker");
                        } else {
                          error.insertAfter(element);
                        }
                    }
                });

				// 有効性検査成功時
                if (form.valid()) {
                	// number基本値セッティング
                    form.find('.numVal').each(function( ) {
                    	if($(this).val() == '') {
                    		$(this).val('0');
                    	}
                    });

                	// 送信
                    $.ajax({
                       url: form.attr('action'),
                       type: form.attr('method'),
                       data: form.serialize(),
                       success: function(result, textStatus, xhr) {
                    	   if(result.assetSeq == 0){
                    		   alert('エラーが発生しました。');
                    	   } else {
                               alert('登録されました。');
                               location.href = '/asset';
                    	   }
                       },
                       // 通信失敗時の処理
                       error: function(xhr, textStatus, error) {
                           alert('通信失敗');
                       }
                   });
                };

            });

			// 登録値初期化
            $('#initBtn').on('click', function () {
				refreshForm($('#insertForm'));
            });

            $('#table1 tbody').on("click",".deleteBtn", function() {

            	if(!confirm('本当に削除しますか？')){
                    /* キャンセルの時の処理 */
                    return false;
                }else{
                    /* OKの時の処理 */
                	$.ajax(/*[[@{/asset/delete}]]*/ 'asset/delete',
        					{
        						type: "POST",
        						dataType: "json",
        						contentType: 'application/JSON',
        						data : JSON.stringify(this.id)
        					}
                    	).success(function(result) {
                    		location.href = '/asset';
                    	}).error(function(xhr, textStatus, error) {
                            alert('通信失敗');
                		});
                }

            });

        })
/*]]>*/
    </script>

</body>
</html>
